<!--pages/evaluate_list/evaluate_list.wxml-->
<wxs module="dateUtils" src="./../utils/index.wxs"></wxs>
<view style="height: 100%; display: flex; flex-direction: column;">
  <view wx:if="{{state == 2 || state == 5}}" style="height: 100%; display: flex;flex-direction: column; padding: 20rpx;">

    <!-- 有内容 -->
    <view wx:for="{{evaluates}}" wx:key="index" style="display: flex;flex-direction: column;background-color: #FFFFFF;padding: 20rpx;border-radius: 20rpx;margin-bottom: 24rpx;">
      <!--昵称 头像 、 时间 -->
      <view style="display: flex; flex-direction: row; flex-wrap: inherit;justify-content: space-between;">
        <text style="font-size: 28rpx;color: #040507; font-weight: 500;">{{item.user_name}}</text>
        <text style="font-size: 20rpx;color: #81868F; font-weight: 500;">{{dateUtils.simpleFormatTime(item._createTime)}}</text>
      </view>

      <!-- 满意度 -->
      <view style="display: flex; flex-direction: row;margin-top: 20rpx;">
        <block wx:for="{{[1,2,3,4,5]}}" wx:for-item="starItem" wx:key-index="starIndex" wx:key="starIndex">
          <view>
            <image wx:if="{{starItem <= item.star}}" src="/pages/images/evaluate/evaluate_good_star.png" style="width: 32rpx; height: 32rpx;margin-right: 10rpx;" />

            <image wx:else src="/pages/images/evaluate/evaluate_bad_star.png" style="width: 32rpx; height: 32rpx;" />
          </view>
        </block>
      </view>
 

      <!-- 内容 -->
      <view style="display: flex; flex-direction: row; margin-top: 20rpx;">
        <text style="font-size: 24rpx;color: #040507; font-weight: 500;">{{item.evaluate}}</text>
      </view>

    </view>
    <view style="display: flex;flex-direction: column;background-color: #FFFFFF;padding: 20rpx;border-radius: 20rpx;margin-bottom: 24rpx;align-items: center;" wx:if="{{state == 2 || state == 5 || state == 6}}" bindtap="loadEvaluate">
      <!-- 加载更多 -->
      <text style="font-size: 28rpx;color: #040507;">加载更多</text>
    </view>
    <!-- 没有更多了 -->
    <view style="display: flex;flex-direction: column;padding: 20rpx;border-radius: 20rpx;margin-top: 24rpx;align-items: center;" wx:if="{{state == 4}}">
      <text style="font-size: 24rpx;color: #81868F;">没有更多了</text>
    </view>
  </view>

  <!-- 空内容 -->
  <view wx:if="{{state == 1}}" style="height: 100%; display: flex;flex-direction: column; align-items: center;">
    <text style="color: #22464D5A;margin-top: 500rpx; font-size: 22rpx;">暂无评论</text>
  </view>
  <!-- 网络错误 -->
  <view wx:if="{{state == 3}}" style="height: 100%; display: flex;flex-direction: column; align-items: center;margin-top: 40%;background-color: ;">
    <text style="margin-top: 32rpx;font-weight: 400; font-size: 26rpx;color: rgba(129, 134, 143, 1);">请求失败，请检查当前网络</text>
    <button class="common_btn" style="width: 630rpx; height: 98rpx; margin-top: 60rpx;" bindtap="loadEvaluate">点击重试</button>
  </view>
</view>

<loading wx:if="{{state == 0}}">加载中...</loading>